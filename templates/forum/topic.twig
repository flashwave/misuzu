{% extends 'forum/master.twig' %}
{% from 'macros.twig' import pagination %}
{%
    from 'forum/macros.twig'
    import
        forum_post_listing,
        forum_topic_buttons,
        forum_topic_locked,
        forum_header,
        forum_topic_tools
%}

{% set title = topic_info.topic_title %}
{% set canonical_url = url_construct('/forum/topic.php', {
    't': topic_info.topic_id,
    'o': topic_offset,
}) %}

{% set topic_tools = forum_topic_tools(topic_info, topic_range, topic_offset, can_reply) %}

{% block content %}
    {{ forum_header(topic_info.topic_title, topic_breadcrumbs) }}
    {{ forum_topic_locked(topic_info.topic_locked, topic_info.topic_archived) }}
    {{ topic_tools }}
    {{ forum_post_listing(topic_posts, topic_info.topic_first_post_id, current_user.user_id, topic_perms) }}
    {{ topic_tools }}
{% endblock %}
